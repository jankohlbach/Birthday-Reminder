(()=>{let birthdays=[];const form=document.querySelector("form"),dayInput=form.querySelector("#day"),monthInput=form.querySelector("#month"),yearInput=form.querySelector("#year"),nameInput=form.querySelector("#name"),infoInput=form.querySelector("#info"),list=document.querySelector(".list"),months=["January","February","March","April","May","June","July","August","September","October","November","December"],LOCAL_STORAGE_KEY="birthdays",setLocalStorage=(key,value)=>localStorage.setItem(key,JSON.stringify(value)),getLocalStorage=key=>JSON.parse(localStorage.getItem(key)),initYearInput=()=>{const currentYear=(new Date).getFullYear();for(let i=0;i<=100;i+=1){const option=document.createElement("option"),yearToAdd=currentYear-i;option.value=yearToAdd,option.textContent=yearToAdd,yearInput.appendChild(option)}},validateDay=()=>{const months31=["01","03","05","07","08","10","12"],option30=dayInput.querySelector('option[value="30"]'),option31=dayInput.querySelector('option[value="31"]');months31.includes(monthInput.value)?[option30,option31].forEach(option=>option.removeAttribute("disabled")):(option31.setAttribute("disabled",""),"31"===dayInput.value&&(dayInput.value=""),"2"===monthInput.value&&(option30.setAttribute("disabled",""),"30"!==dayInput.value&&"31"!==dayInput.value||(dayInput.value="")))},validateMonth=()=>{const months30=["04","06","09","11"],option2=monthInput.querySelector('option[value="02"]');"30"===dayInput.value?(option2.setAttribute("disabled",""),months30.forEach(month=>monthInput.querySelector(`option[value="${month}"]`).removeAttribute("disabled"))):"31"===dayInput.value?(option2.setAttribute("disabled",""),months30.forEach(month=>monthInput.querySelector(`option[value="${month}"]`).setAttribute("disabled",""))):option2.removeAttribute("disabled")},generateHash=()=>{const currentDate=(new Date).getTime(),random=Math.floor(100*Math.random()),hash=currentDate.toString()+random.toString();return hash},sortList=array=>{array.sort((a,b)=>a.month>b.month?1:a.month===b.month&&a.day>b.day?1:null)},updateList=()=>{birthdays=getLocalStorage("birthdays");const date=new Date,currentYear=date.getFullYear();let month;list.innerHTML="",birthdays.forEach(birthday=>{if(month!==birthday.month){const monthElement=document.createElement("div");monthElement.classList.add("month"),monthElement.innerHTML=`\n          <span class="month">${months[parseInt(birthday.month,10)-1]}</span>\n          <span class="year">${currentYear}</span>\n        `,list.appendChild(monthElement)}const listElement=document.createElement("div");listElement.classList.add("list-item"),listElement.id=birthday.hash,listElement.innerHTML=`\n        <span class="date">${birthday.day}</span>\n        <span class="name">${birthday.name}</span>\n        <button class="edit">Edit</button>\n        <button class="delete">Delete</button>\n      `,list.appendChild(listElement),({month:month}=birthday)})},updateAll=()=>{setLocalStorage("birthdays",birthdays),updateList()},getFormData=e=>(e.preventDefault(),{day:dayInput.value,month:monthInput.value,year:yearInput.value,name:nameInput.value,info:infoInput.value,hash:generateHash()}),handleSubmit=e=>{const newEntry=getFormData(e);birthdays.push(newEntry),sortList(birthdays),updateAll(),form.reset()},handleButtonClick=e=>{if("button"!==e.target.tagName.toLowerCase())return;const button=e.target;if(button.classList.contains("delete")){const idToDelete=button.parentNode.id,indexToDelete=birthdays.findIndex(birthday=>birthday.hash===idToDelete);birthdays.splice(indexToDelete,1),updateAll()}};initYearInput(),getLocalStorage("birthdays")&&updateList(),dayInput.addEventListener("change",validateMonth),monthInput.addEventListener("change",validateDay),form.addEventListener("submit",handleSubmit),list.addEventListener("click",handleButtonClick)}).call(this);
//# sourceMappingURL=main.min.js.map